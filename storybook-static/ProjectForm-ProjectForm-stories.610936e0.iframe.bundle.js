/*! For license information please see ProjectForm-ProjectForm-stories.610936e0.iframe.bundle.js.LICENSE.txt */
(self.webpackChunknextjs=self.webpackChunknextjs||[]).push([[822],{"./components/ProjectForm/ProjectForm.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Empty:()=>Empty,Success:()=>Success,Uploading:()=>Uploading,ValidationErrors:()=>ValidationErrors,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ProjectForm_stories});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("./node_modules/@storybook/testing-library/dist/index.mjs"),test_dist=__webpack_require__("./node_modules/@storybook/test/dist/index.mjs");function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return _regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),_regeneratorDefine2(u),_regeneratorDefine2(u,o,"Generator"),_regeneratorDefine2(u,n,function(){return this}),_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,r,n,t)}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}var useRouter=function useRouter(){return{push:function push(_path){},replace:function replace(_path){},refresh:function refresh(){},back:function back(){},forward:function forward(){},prefetch:(_prefetch=function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(_regenerator().m(function _callee(){return _regenerator().w(function(_context){for(;;)if(0===_context.n)return _context.a(2,void 0)},_callee)})),function prefetch(){return _prefetch.apply(this,arguments)})};var _prefetch},proxy=__webpack_require__("./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),index_browser=__webpack_require__("./node_modules/nanoid/index.browser.js"),createLucideIcon=__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js");const TriangleAlert=(0,createLucideIcon.A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),LoaderCircle=(0,createLucideIcon.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),CircleCheck=(0,createLucideIcon.A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Upload=(0,createLucideIcon.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Trash2=(0,createLucideIcon.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var useAuth=__webpack_require__("./hooks/useAuth.ts"),use_toast=__webpack_require__("./hooks/use-toast.ts");function slug_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return slug_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(slug_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,slug_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,slug_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),slug_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",slug_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),slug_regeneratorDefine2(u),slug_regeneratorDefine2(u,o,"Generator"),slug_regeneratorDefine2(u,n,function(){return this}),slug_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(slug_regenerator=function _regenerator(){return{w:i,m:f}})()}function slug_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}slug_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){slug_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},slug_regeneratorDefine2(e,r,n,t)}function slug_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function slug_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){slug_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){slug_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}var slugify=function slugify(value){return value.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,64)};function isSlugAvailable(_x,_x2){return _isSlugAvailable.apply(this,arguments)}function _isSlugAvailable(){return(_isSlugAvailable=slug_asyncToGenerator(slug_regenerator().m(function _callee(slug,adapter){var existing;return slug_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:return _context.n=1,adapter.fetchProjects({slug,limit:1});case 1:return existing=_context.v,_context.a(2,0===existing.projects.length)}},_callee)}))).apply(this,arguments)}function ensureUniqueSlug(_x3,_x4){return _ensureUniqueSlug.apply(this,arguments)}function _ensureUniqueSlug(){return _ensureUniqueSlug=slug_asyncToGenerator(slug_regenerator().m(function _callee2(title,adapter){var maxAttempts,candidate,attempt,_args2=arguments;return slug_regenerator().w(function(_context2){for(;;)switch(_context2.n){case 0:maxAttempts=_args2.length>2&&void 0!==_args2[2]?_args2[2]:5,(candidate=slugify(title))||(candidate="project-".concat(Date.now())),attempt=0;case 1:if(!(attempt<maxAttempts)){_context2.n=5;break}return _context2.n=2,isSlugAvailable(candidate,adapter);case 2:if(!_context2.v){_context2.n=3;break}return _context2.a(2,candidate);case 3:candidate=slugify("".concat(candidate,"-").concat(Math.floor(1e3*Math.random())));case 4:attempt+=1,_context2.n=1;break;case 5:throw new Error("Unable to generate a unique slug. Please choose a different title.");case 6:return _context2.a(2)}},_callee2)})),_ensureUniqueSlug.apply(this,arguments)}var useProjects=__webpack_require__("./src/hooks/useProjects.ts"),adapterFactory=__webpack_require__("./src/lib/adapterFactory.ts"),upload=__webpack_require__("./src/lib/upload.ts"),constants=__webpack_require__("./src/config/constants.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ProjectForm_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return ProjectForm_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(ProjectForm_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,ProjectForm_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,ProjectForm_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),ProjectForm_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",ProjectForm_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),ProjectForm_regeneratorDefine2(u),ProjectForm_regeneratorDefine2(u,o,"Generator"),ProjectForm_regeneratorDefine2(u,n,function(){return this}),ProjectForm_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(ProjectForm_regenerator=function _regenerator(){return{w:i,m:f}})()}function ProjectForm_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}ProjectForm_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){ProjectForm_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},ProjectForm_regeneratorDefine2(e,r,n,t)}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function ProjectForm_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function ProjectForm_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){ProjectForm_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){ProjectForm_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var tagsCatalog=["AI/ML","Next.js","Firebase","Design","Web3","Mobile","Open Source","Productivity","Analytics"],projectSchema=lib.z.object({title:lib.z.string().min(4,"Title must be at least 4 characters").max(120,"Title must be under 120 characters"),slug:lib.z.string().min(4,"Slug must have at least 4 characters").max(80,"Slug must be under 80 characters").regex(/^[a-z0-9-]+$/,"Use lowercase letters, numbers, and hyphens only"),summary:lib.z.string().min(20,"Summary must be at least 20 characters").max(240,"Summary must be under 240 characters"),description:lib.z.string().min(80,"Give collaborators more context (min 80 characters)"),tags:lib.z.array(lib.z.string()).min(1,"Add at least one tag").max(8,"Eight tags max"),repoUrl:lib.z.union([lib.z.string().url("Must be a valid URL").max(200),lib.z.literal("")]).optional(),demoUrl:lib.z.union([lib.z.string().url("Must be a valid URL").max(200),lib.z.literal("")]).optional(),visibility:lib.z.enum(["public","unlisted"])}),defaultValues={title:"",slug:"",summary:"",description:"",tags:[],repoUrl:"",demoUrl:"",visibility:"public"};function ProjectForm(){var _errors$slug,user=(0,useAuth.A)().user,router=useRouter(),adapter=(0,react.useMemo)(function(){return(0,adapterFactory.IN)()},[]),createProjectMutation=(0,useProjects.bL)(),toast=(0,use_toast.dj)().toast,_useForm=(0,index_esm.mN)({resolver:(0,zod.u)(projectSchema),defaultValues}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,_useForm$formState=_useForm.formState,errors=_useForm$formState.errors,isDirty=_useForm$formState.isDirty,watch=_useForm.watch,_useState2=_slicedToArray((0,react.useState)(!1),2),slugManuallyEdited=_useState2[0],setSlugManuallyEdited=_useState2[1],_useState4=_slicedToArray((0,react.useState)([]),2),uploadItems=_useState4[0],setUploadItems=_useState4[1],_useState6=_slicedToArray((0,react.useState)(!1),2),pending=_useState6[0],setPending=_useState6[1],_useState8=_slicedToArray((0,react.useState)(!1),2),slugCheckRunning=_useState8[0],setSlugCheckRunning=_useState8[1],_useState0=_slicedToArray((0,react.useState)(null),2),slugError=_useState0[0],setSlugError=_useState0[1],_useState10=_slicedToArray((0,react.useState)(""),2),activeTagQuery=_useState10[0],setActiveTagQuery=_useState10[1];(0,react.useEffect)(function(){register("tags")},[register]),(0,react.useEffect)(function(){return function(){uploadItems.forEach(function(item){return URL.revokeObjectURL(item.preview)})}},[uploadItems]);var titleValue=watch("title"),slugValue=watch("slug");(0,react.useEffect)(function(){!slugManuallyEdited&&titleValue&&setValue("slug",slugify(titleValue))},[titleValue,slugManuallyEdited,setValue]);var handleFiles=function(){var _ref=ProjectForm_asyncToGenerator(ProjectForm_regenerator().m(function _callee(fileList){var slots,incoming,processed,_iterator,_step,file,compressed,id,_t,_t2;return ProjectForm_regenerator().w(function(_context){for(;;)switch(_context.p=_context.n){case 0:if(fileList){_context.n=1;break}return _context.a(2);case 1:if(slots=Math.max(constants.ee-uploadItems.length,0)){_context.n=2;break}return toast({title:"Media limit reached",description:"Only ".concat(constants.ee," images allowed.")}),_context.a(2);case 2:incoming=Array.from(fileList).slice(0,slots),processed=[],_iterator=_createForOfIteratorHelper(incoming),_context.p=3,_iterator.s();case 4:if((_step=_iterator.n()).done){_context.n=10;break}if((file=_step.value).type.startsWith("image/")){_context.n=5;break}return toast({title:"Only images supported",description:"".concat(file.name," was skipped.")}),_context.a(3,9);case 5:return _context.p=5,_context.n=6,(0,upload.w)(file,{maxBytes:constants.fD});case 6:if(!((compressed=_context.v).size>constants.fD)){_context.n=7;break}throw new Error("Image is still larger than 1MB after compression.");case 7:id=(0,index_browser.Ak)(8),processed.push({id,file:compressed,preview:URL.createObjectURL(compressed),progress:0,status:"pending"}),_context.n=9;break;case 8:_context.p=8,_t=_context.v,toast({title:"Could not process image",description:_t instanceof Error?_t.message:"Unknown error"});case 9:_context.n=4;break;case 10:_context.n=12;break;case 11:_context.p=11,_t2=_context.v,_iterator.e(_t2);case 12:return _context.p=12,_iterator.f(),_context.f(12);case 13:processed.length&&setUploadItems(function(prev){return[].concat(_toConsumableArray(prev),processed)});case 14:return _context.a(2)}},_callee,null,[[5,8],[3,11,12,13]])}));return function handleFiles(_x){return _ref.apply(this,arguments)}}(),tagSuggestions=(0,react.useMemo)(function(){return activeTagQuery?tagsCatalog.filter(function(tag){return tag.toLowerCase().includes(activeTagQuery.toLowerCase())}):tagsCatalog},[activeTagQuery]),handleAddTag=function handleAddTag(tag){var current=watch("tags");current.includes(tag)||(current.length>=8?toast({title:"Tag limit reached",description:"You can add up to 8 tags."}):(setValue("tags",[].concat(_toConsumableArray(current),[tag])),setActiveTagQuery("")))},checkSlugAvailability=function(){var _ref2=ProjectForm_asyncToGenerator(ProjectForm_regenerator().m(function _callee2(slug){var _t3;return ProjectForm_regenerator().w(function(_context2){for(;;)switch(_context2.p=_context2.n){case 0:return setSlugCheckRunning(!0),setSlugError(null),_context2.p=1,_context2.n=2,ensureUniqueSlug(slug,adapter);case 2:return setSlugError(null),_context2.a(2,!0);case 3:return _context2.p=3,_t3=_context2.v,setSlugError(_t3 instanceof Error?_t3.message:"Slug already exists"),_context2.a(2,!1);case 4:return _context2.p=4,setSlugCheckRunning(!1),_context2.f(4);case 5:return _context2.a(2)}},_callee2,null,[[1,3,4,5]])}));return function checkSlugAvailability(_x2){return _ref2.apply(this,arguments)}}(),onSubmit=handleSubmit(function(){var _ref3=ProjectForm_asyncToGenerator(ProjectForm_regenerator().m(function _callee3(values){var _user$email,_role,_user$email2,preparedFiles,projectId,media,ownerName,ownerAvatar,role,payload,project,_t4;return ProjectForm_regenerator().w(function(_context3){for(;;)switch(_context3.p=_context3.n){case 0:if(user){_context3.n=1;break}return toast({title:"Sign in required",description:"You need an account to publish a project."}),_context3.a(2);case 1:return setPending(!0),_context3.p=2,slugManuallyEdited||setValue("slug",slugify(values.title)),_context3.n=3,checkSlugAvailability(values.slug);case 3:if(_context3.v){_context3.n=4;break}return setPending(!1),_context3.a(2);case 4:if(preparedFiles=uploadItems.map(function(item){return item.file}),projectId="proj_".concat((0,index_browser.Ak)(10)),media=[],!preparedFiles.length){_context3.n=6;break}return setUploadItems(function(items){return items.map(function(item){return _objectSpread(_objectSpread({},item),{},{status:"uploading",progress:5})})}),_context3.n=5,adapter.uploadProjectMedia(projectId,preparedFiles,{onProgress:function onProgress(_ref4){var fileName=_ref4.fileName,progress=_ref4.progress;setUploadItems(function(items){return items.map(function(item){return item.file.name===fileName?_objectSpread(_objectSpread({},item),{},{progress,status:100===progress?"success":"uploading"}):item})})}});case 5:media=_context3.v;case 6:return ownerName=user.displayName||(null===(_user$email=user.email)||void 0===_user$email?void 0:_user$email.split("@")[0])||"Creator",ownerAvatar=user.photoURL||"https://avatars.githubusercontent.com/u/1?v=4",role=null!==(_role=null==user?void 0:user.role)&&void 0!==_role?_role:null!==(_user$email2=user.email)&&void 0!==_user$email2&&_user$email2.endsWith("@youthforge.dev")?"admin":"member",payload={projectId,owner:{id:user.uid,displayName:ownerName,avatarUrl:ownerAvatar,role},title:values.title,slug:values.slug,summary:values.summary,description:values.description,tags:values.tags,repoUrl:values.repoUrl||void 0,demoUrl:values.demoUrl||void 0,visibility:values.visibility,media},_context3.n=7,createProjectMutation.mutateAsync(payload);case 7:project=_context3.v,toast({title:"Project published",description:"Your project is now live in the Phase 4 feed."}),router.push("/projects/".concat(project.slug)),_context3.n=9;break;case 8:_context3.p=8,_t4=_context3.v,console.error(_t4),toast({title:"Something went wrong",description:_t4 instanceof Error?_t4.message:"Failed to save project"});case 9:return _context3.p=9,setPending(!1),_context3.f(9);case 10:return _context3.a(2)}},_callee3,null,[[2,8,9,10]])}));return function(_x3){return _ref3.apply(this,arguments)}}());return(0,jsx_runtime.jsxs)(proxy.P.section,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto space-y-8",children:[(0,jsx_runtime.jsxs)("header",{className:"space-y-3",children:[(0,jsx_runtime.jsx)("p",{className:"uppercase tracking-widest text-xs text-muted-foreground",children:"Phase 4"}),(0,jsx_runtime.jsx)("h1",{className:"text-4xl font-bold",children:"Create a project"}),(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground",children:"Share your build with the YouthForge community. Images are compressed to stay within the Firebase Spark budget and uploads fall back to the mock adapter while you configure your keys."})]}),!constants.$v.useFirebaseAdapter&&(0,jsx_runtime.jsxs)("div",{className:"rounded-2xl border border-dashed border-amber-500/40 bg-amber-500/5 p-4 text-sm text-amber-200",children:[(0,jsx_runtime.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[(0,jsx_runtime.jsx)(TriangleAlert,{className:"h-4 w-4"})," Firebase adapter disabled"]}),(0,jsx_runtime.jsx)("p",{className:"text-amber-100/80",children:"Turn on NEXT_PUBLIC_USE_FIREBASE to push media to Storage."})]}),(0,jsx_runtime.jsxs)("form",{onSubmit,className:"space-y-10",children:[(0,jsx_runtime.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,jsx_runtime.jsxs)("label",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Title"}),(0,jsx_runtime.jsx)("input",_objectSpread(_objectSpread({},register("title")),{},{placeholder:"e.g. Distributed design editor",className:"glass-input w-full"})),errors.title&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:errors.title.message})]}),(0,jsx_runtime.jsxs)("label",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("span",{className:"text-sm font-medium flex items-center gap-2",children:["Slug",slugCheckRunning&&(0,jsx_runtime.jsx)(LoaderCircle,{className:"h-3 w-3 animate-spin"}),!slugCheckRunning&&!slugError&&slugValue&&(0,jsx_runtime.jsx)(CircleCheck,{className:"h-3 w-3 text-emerald-400"})]}),(0,jsx_runtime.jsx)("input",_objectSpread(_objectSpread({},register("slug")),{},{onFocus:function onFocus(){return setSlugManuallyEdited(!0)},onBlur:function onBlur(){return checkSlugAvailability(slugValue)},placeholder:"distributed-design-editor",className:"glass-input w-full"})),(errors.slug||slugError)&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:(null===(_errors$slug=errors.slug)||void 0===_errors$slug?void 0:_errors$slug.message)||slugError})]})]}),(0,jsx_runtime.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,jsx_runtime.jsxs)("label",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Summary"}),(0,jsx_runtime.jsx)("textarea",_objectSpread(_objectSpread({},register("summary")),{},{rows:3,className:"glass-input w-full",placeholder:"One or two sentences explaining what you built"})),(0,jsx_runtime.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[watch("summary").length,"/240"]}),errors.summary&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:errors.summary.message})]}),(0,jsx_runtime.jsxs)("label",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Visibility"}),(0,jsx_runtime.jsxs)("select",_objectSpread(_objectSpread({},register("visibility")),{},{className:"glass-input w-full",children:[(0,jsx_runtime.jsx)("option",{value:"public",children:"Public"}),(0,jsx_runtime.jsx)("option",{value:"unlisted",children:"Unlisted"})]})),errors.visibility&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:errors.visibility.message})]})]}),(0,jsx_runtime.jsxs)("label",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Description (Markdown supported)"}),(0,jsx_runtime.jsx)("textarea",_objectSpread(_objectSpread({},register("description")),{},{rows:8,className:"glass-input w-full",placeholder:"Explain the problem, solution, stack, and roadmap..."})),errors.description&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:errors.description.message})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Tags"}),(0,jsx_runtime.jsx)("div",{className:"flex flex-wrap gap-2",children:watch("tags").map(function(tag){return(0,jsx_runtime.jsxs)("button",{type:"button",onClick:function onClick(){return function handleRemoveTag(tag){var current=watch("tags");setValue("tags",current.filter(function(t){return t!==tag}))}(tag)},className:"glass-button-ghost text-xs",children:[tag," Ã—"]},tag)})}),(0,jsx_runtime.jsx)("input",{value:activeTagQuery,onChange:function onChange(event){return setActiveTagQuery(event.target.value)},onKeyDown:function onKeyDown(event){"Enter"===event.key&&(event.preventDefault(),activeTagQuery.trim()&&handleAddTag(activeTagQuery.trim()))},placeholder:"Search or add tags",className:"glass-input w-full"}),(0,jsx_runtime.jsx)("div",{className:"flex flex-wrap gap-2 text-xs",children:tagSuggestions.map(function(tag){return(0,jsx_runtime.jsx)("button",{type:"button",className:"glass-button-ghost",onClick:function onClick(){return handleAddTag(tag)},children:tag},tag)})}),errors.tags&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:errors.tags.message})]}),(0,jsx_runtime.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,jsx_runtime.jsxs)("label",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Repository URL"}),(0,jsx_runtime.jsx)("input",_objectSpread(_objectSpread({},register("repoUrl")),{},{placeholder:"https://github.com/youthforge/project",className:"glass-input w-full"})),errors.repoUrl&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:errors.repoUrl.message})]}),(0,jsx_runtime.jsxs)("label",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm font-medium",children:"Live demo URL"}),(0,jsx_runtime.jsx)("input",_objectSpread(_objectSpread({},register("demoUrl")),{},{placeholder:"https://app.youthforge.dev",className:"glass-input w-full"})),errors.demoUrl&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:errors.demoUrl.message})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("span",{className:"text-sm font-medium flex justify-between",children:["Media (",uploadItems.length,"/",constants.ee,")",(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted-foreground",children:"Max 1MB per image"})]}),(0,jsx_runtime.jsxs)("label",{className:"flex flex-col items-center justify-center gap-3 border border-dashed border-white/10 rounded-3xl p-8 cursor-pointer hover:border-white/30 transition",children:[(0,jsx_runtime.jsx)(Upload,{className:"h-6 w-6 text-muted-foreground"}),(0,jsx_runtime.jsx)("span",{className:"text-sm text-muted-foreground text-center",children:"Drag & drop images or click to browse"}),(0,jsx_runtime.jsx)("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden","data-testid":"project-media-input",onChange:function onChange(event){return handleFiles(event.target.files)},disabled:uploadItems.length>=constants.ee})]}),(0,jsx_runtime.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:uploadItems.map(function(item){return(0,jsx_runtime.jsxs)("div",{className:"relative rounded-2xl border border-white/10 p-4",children:[(0,jsx_runtime.jsx)("button",{type:"button",onClick:function onClick(){return function removeUpload(id){setUploadItems(function(prev){var next=prev.filter(function(item){return item.id!==id});return prev.find(function(item){return item.id===id&&URL.revokeObjectURL(item.preview)}),next})}(item.id)},className:"absolute top-2 right-2 text-muted-foreground hover:text-white","aria-label":"Remove image",children:(0,jsx_runtime.jsx)(Trash2,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)("img",{src:item.preview,alt:"Preview",className:"h-40 w-full rounded-xl object-cover"}),(0,jsx_runtime.jsx)("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden",children:(0,jsx_runtime.jsx)("div",{className:"h-full bg-accent",style:{width:"".concat(item.progress,"%")}})}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-muted-foreground mt-1 capitalize",children:item.status}),item.error&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-red-400",children:item.error})]},item.id)})})]}),(0,jsx_runtime.jsx)(proxy.P.button,{whileTap:{scale:.98},type:"submit",disabled:pending||!isDirty,className:"glass-button px-6 py-3 flex items-center gap-2",children:pending?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(LoaderCircle,{className:"h-4 w-4 animate-spin"})," Saving"]}):"Publish project"})]})]})}ProjectForm.__docgenInfo={description:"",methods:[],displayName:"ProjectForm"};var mockAdapter=__webpack_require__("./src/lib/mockAdapter.ts");function ProjectForm_stories_typeof(o){return ProjectForm_stories_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ProjectForm_stories_typeof(o)}function ProjectForm_stories_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return ProjectForm_stories_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(ProjectForm_stories_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,ProjectForm_stories_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,ProjectForm_stories_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),ProjectForm_stories_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",ProjectForm_stories_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),ProjectForm_stories_regeneratorDefine2(u),ProjectForm_stories_regeneratorDefine2(u,o,"Generator"),ProjectForm_stories_regeneratorDefine2(u,n,function(){return this}),ProjectForm_stories_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(ProjectForm_stories_regenerator=function _regenerator(){return{w:i,m:f}})()}function ProjectForm_stories_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}ProjectForm_stories_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){ProjectForm_stories_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},ProjectForm_stories_regeneratorDefine2(e,r,n,t)}function ProjectForm_stories_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function ProjectForm_stories_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){ProjectForm_stories_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){ProjectForm_stories_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function ProjectForm_stories_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ProjectForm_stories_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ProjectForm_stories_ownKeys(Object(t),!0).forEach(function(r){ProjectForm_stories_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ProjectForm_stories_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ProjectForm_stories_defineProperty(e,r,t){return(r=function ProjectForm_stories_toPropertyKey(t){var i=function ProjectForm_stories_toPrimitive(t,r){if("object"!=ProjectForm_stories_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=ProjectForm_stories_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==ProjectForm_stories_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var _uploadProjectMedia,AdapterBoundary=function AdapterBoundary(_ref){var adapter=_ref.adapter,children=_ref.children;return(0,react.useEffect)(function(){return(0,adapterFactory.OV)(null!=adapter?adapter:null),function(){(0,adapterFactory.NQ)()}},[adapter]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children})},slowUploadAdapter=ProjectForm_stories_objectSpread(ProjectForm_stories_objectSpread({},mockAdapter.C),{},{uploadProjectMedia:(_uploadProjectMedia=ProjectForm_stories_asyncToGenerator(ProjectForm_stories_regenerator().m(function _callee(projectId,files,options){return ProjectForm_stories_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:return files.forEach(function(file){var _options$onProgress;return null==options||null===(_options$onProgress=options.onProgress)||void 0===_options$onProgress?void 0:_options$onProgress.call(options,{fileName:file.name,progress:35})}),_context.n=1,new Promise(function(resolve){return setTimeout(resolve,4e3)});case 1:return _context.a(2,mockAdapter.C.uploadProjectMedia(projectId,files,options))}},_callee)})),function uploadProjectMedia(_x,_x2,_x3){return _uploadProjectMedia.apply(this,arguments)})});const ProjectForm_stories={title:"Project/ProjectForm",component:ProjectForm,parameters:{layout:"fullscreen"}};var _play,_play2,_play3,fillRequiredFields=function(){var _ref2=ProjectForm_stories_asyncToGenerator(ProjectForm_stories_regenerator().m(function _callee2(canvas){return ProjectForm_stories_regenerator().w(function(_context2){for(;;)switch(_context2.n){case 0:return _context2.n=1,dist.Q4.type(canvas.getByPlaceholderText(/distributed design editor/i),"Storybook Flow Project");case 1:return _context2.n=2,dist.Q4.type(canvas.getByPlaceholderText(/one or two sentences/i),"Story to verify validation, uploads, and success flows.");case 2:return _context2.n=3,dist.Q4.type(canvas.getByPlaceholderText(/explain the problem/i),"This description clears the 80 character requirement for the Storybook preview and proves success.");case 3:return _context2.n=4,dist.Q4.click(canvas.getByRole("button",{name:"AI/ML"}));case 4:return _context2.a(2)}},_callee2)}));return function fillRequiredFields(_x4){return _ref2.apply(this,arguments)}}(),Empty={render:function render(){return(0,jsx_runtime.jsx)(AdapterBoundary,{children:(0,jsx_runtime.jsx)(ProjectForm,{})})}},ValidationErrors={render:function render(){return(0,jsx_runtime.jsx)(AdapterBoundary,{children:(0,jsx_runtime.jsx)(ProjectForm,{})})},play:(_play=ProjectForm_stories_asyncToGenerator(ProjectForm_stories_regenerator().m(function _callee3(_ref3){var canvasElement,canvas;return ProjectForm_stories_regenerator().w(function(_context3){for(;;)switch(_context3.n){case 0:return canvasElement=_ref3.canvasElement,canvas=(0,dist.ux)(canvasElement),_context3.n=1,dist.Q4.click(canvas.getByRole("button",{name:/publish project/i}));case 1:return _context3.n=2,(0,dist.fm)(function(){return(0,test_dist.E3)(canvas.getAllByText(/must/i).length).toBeGreaterThan(0)});case 2:return _context3.a(2)}},_callee3)})),function play(_x5){return _play.apply(this,arguments)})},Uploading={render:function render(){return(0,jsx_runtime.jsx)(AdapterBoundary,{adapter:slowUploadAdapter,children:(0,jsx_runtime.jsx)(ProjectForm,{})})},play:(_play2=ProjectForm_stories_asyncToGenerator(ProjectForm_stories_regenerator().m(function _callee4(_ref4){var canvasElement,canvas,fileInput,file;return ProjectForm_stories_regenerator().w(function(_context4){for(;;)switch(_context4.n){case 0:return canvasElement=_ref4.canvasElement,canvas=(0,dist.ux)(canvasElement),_context4.n=1,fillRequiredFields(canvas);case 1:return fileInput=canvas.getByTestId("project-media-input"),file=new File(["storybook"],"story-upload.png",{type:"image/png"}),_context4.n=2,dist.Q4.upload(fileInput,file);case 2:return _context4.n=3,dist.Q4.click(canvas.getByRole("button",{name:/publish project/i}));case 3:return _context4.n=4,(0,dist.fm)(function(){return(0,test_dist.E3)(canvas.getAllByText(/uploading/i).length).toBeGreaterThan(0)});case 4:return _context4.a(2)}},_callee4)})),function play(_x6){return _play2.apply(this,arguments)})},Success={render:function render(){return(0,jsx_runtime.jsx)(AdapterBoundary,{children:(0,jsx_runtime.jsx)(ProjectForm,{})})},play:(_play3=ProjectForm_stories_asyncToGenerator(ProjectForm_stories_regenerator().m(function _callee5(_ref5){var canvasElement,canvas;return ProjectForm_stories_regenerator().w(function(_context5){for(;;)switch(_context5.n){case 0:return canvasElement=_ref5.canvasElement,canvas=(0,dist.ux)(canvasElement),_context5.n=1,fillRequiredFields(canvas);case 1:return _context5.n=2,dist.Q4.click(canvas.getByRole("button",{name:/publish project/i}));case 2:return _context5.n=3,(0,dist.fm)(function(){return(0,test_dist.E3)(canvas.getByText(/Project published/i)).toBeInTheDocument()});case 3:return _context5.a(2)}},_callee5)})),function play(_x7){return _play3.apply(this,arguments)})};const __namedExportsOrder=["Empty","ValidationErrors","Uploading","Success"];Empty.parameters={...Empty.parameters,docs:{...Empty.parameters?.docs,source:{originalSource:"{\n  render: () => <AdapterBoundary>\n      <ProjectForm />\n    </AdapterBoundary>\n}",...Empty.parameters?.docs?.source}}},ValidationErrors.parameters={...ValidationErrors.parameters,docs:{...ValidationErrors.parameters?.docs,source:{originalSource:"{\n  render: () => <AdapterBoundary>\n      <ProjectForm />\n    </AdapterBoundary>,\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    await userEvent.click(canvas.getByRole('button', {\n      name: /publish project/i\n    }));\n    await waitFor(() => expect(canvas.getAllByText(/must/i).length).toBeGreaterThan(0));\n  }\n}",...ValidationErrors.parameters?.docs?.source}}},Uploading.parameters={...Uploading.parameters,docs:{...Uploading.parameters?.docs,source:{originalSource:"{\n  render: () => <AdapterBoundary adapter={slowUploadAdapter}>\n      <ProjectForm />\n    </AdapterBoundary>,\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    await fillRequiredFields(canvas);\n    const fileInput = canvas.getByTestId('project-media-input') as HTMLInputElement;\n    const file = new File(['storybook'], 'story-upload.png', {\n      type: 'image/png'\n    });\n    await userEvent.upload(fileInput, file);\n    await userEvent.click(canvas.getByRole('button', {\n      name: /publish project/i\n    }));\n    await waitFor(() => expect(canvas.getAllByText(/uploading/i).length).toBeGreaterThan(0));\n  }\n}",...Uploading.parameters?.docs?.source}}},Success.parameters={...Success.parameters,docs:{...Success.parameters?.docs,source:{originalSource:"{\n  render: () => <AdapterBoundary>\n      <ProjectForm />\n    </AdapterBoundary>,\n  play: async ({\n    canvasElement\n  }) => {\n    const canvas = within(canvasElement);\n    await fillRequiredFields(canvas);\n    await userEvent.click(canvas.getByRole('button', {\n      name: /publish project/i\n    }));\n    await waitFor(() => expect(canvas.getByText(/Project published/i)).toBeInTheDocument());\n  }\n}",...Success.parameters?.docs?.source}}}},"?4f7e":()=>{}}]);